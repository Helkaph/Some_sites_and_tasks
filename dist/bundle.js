(()=>{"use strict";let e=document.querySelector("#start"),t=document.querySelector("#easy_mode"),n=document.querySelector("#medium_mode"),l=document.querySelector("#hard_mode"),i=document.querySelector("#game_board");t.addEventListener("click",(function(){e.style.display="none",function(){let e=document.querySelector("body"),t=document.querySelector("#start"),n=document.querySelector("#field"),l=document.querySelector("#counter"),i=["red","green","blue"],s=document.createElement("button");s.innerHTML="Режим отладки",s.setAttribute("id","dev"),s.style.background="white",s.style.position="absolute",s.style.color="white",e.appendChild(s);for(let e=0;e<3;e++){let e=document.createElement("tr");n.appendChild(e);for(let t=0;t<3;t++){let t=document.createElement("td");e.appendChild(t),t.classList.add(i[Math.floor(3*Math.random())+0])}}function r(){this.setAttribute("class",function(e,t){for(let n=0;n<e.length;n++)if(t.getAttribute("class")==e[n])return"blue"!==e[n]?e[n+1]:e[0]}(i,this))}let o=n.querySelectorAll("td");for(let e of o)e.addEventListener("click",r);let a=0,c=0;n.addEventListener("click",(function e(n){if("TD"==n.target.tagName){a++;let n=[];for(let e=0;e<o.length;e++){let t=o[e].getAttribute("class");n.push(t)}let i=n.filter(((e,t,n)=>n.indexOf(e)!==t));if(l.textContent="Сделано ходов: "+a,8==i.length){alert("Победа. Возвращаемся в основное меню"),c++,1==c&&(this.innerHTML="",this.parentElement.classList.remove("easy_mode"),t.style.display="flex"),this.removeEventListener("click",e);for(let e of o)e.removeEventListener("click",r);l.textContent=""}}return c}))}(),i.classList.add("easy_mode")})),n.addEventListener("click",(function(){e.style.display="none",function(){let e=document.querySelector("body"),t=document.querySelector("#start"),n=document.querySelector("#field"),l=document.querySelector("#counter"),i=["red","green","blue","yellow","darkmagenta"],s=document.createElement("button");s.innerHTML="Режим отладки",s.setAttribute("id","dev"),s.style.background="white",s.style.position="absolute",s.style.color="white",e.appendChild(s);for(let e=0;e<6;e++){let e=document.createElement("tr");n.appendChild(e);for(let t=0;t<6;t++){let n=document.createElement("td");n.dataset.num=t,e.appendChild(n),n.classList.add(i[Math.floor(5*Math.random())+0])}}function r(e,t){for(let n=0;n<e.length;n++)if(t.getAttribute("class")==e[n])return"darkmagenta"!==e[n]?e[n+1]:e[0]}function o(){let e=this.parentElement.previousElementSibling.childNodes,t=this.parentElement.nextElementSibling.childNodes;this.setAttribute("class",r(i,this)),this.previousElementSibling&&this.previousElementSibling.setAttribute("class",r(i,this.previousElementSibling)),this.nextElementSibling&&this.nextElementSibling.setAttribute("class",r(i,this.nextElementSibling));for(let t of e)this.dataset.num==t.dataset.num&&t.setAttribute("class",r(i,t));for(let e of t)this.dataset.num==e.dataset.num&&e.setAttribute("class",r(i,e))}let a=n.querySelectorAll("td");for(let e of a)e.addEventListener("click",o);let c=0,d=0;n.addEventListener("click",(function e(n){if("TD"==n.target.tagName){c++;let n=[];for(let e=0;e<a.length;e++){let t=a[e].getAttribute("class");n.push(t)}let i=n.filter(((e,t,n)=>n.indexOf(e)!==t));if(l.textContent="Сделано ходов: "+c,35==i.length){alert("Победа. Возвращаемся в основное меню"),d++,1==d&&(this.innerHTML="",this.parentElement.classList.remove("medium_mode"),t.style.display="flex"),this.removeEventListener("click",e);for(let e of a)e.removeEventListener("click",o);l.textContent=""}}return d}))}(),i.classList.add("medium_mode")})),l.addEventListener("click",(function(){e.style.display="none",function(){let e=document.querySelector("body"),t=document.querySelector("#start"),n=document.querySelector("#field"),l=document.querySelector("#counter"),i=["red","green","blue","yellow","darkmagenta","orange","cyan"],s=document.createElement("button");s.innerHTML="Режим отладки",s.setAttribute("id","dev"),s.style.background="white",s.style.position="absolute",s.style.color="white",e.appendChild(s);for(let e=0;e<9;e++){let e=document.createElement("tr");n.appendChild(e);for(let t=0;t<9;t++){let n=document.createElement("td");n.dataset.num=t,e.appendChild(n),n.classList.add(i[Math.floor(7*Math.random())+0])}}function r(e,t){for(let n=0;n<e.length;n++)if(t.getAttribute("class")==e[n])return"cyan"!==e[n]?e[n+1]:e[0]}function o(){let e=this.parentElement.previousElementSibling.childNodes,t=this.parentElement.nextElementSibling.childNodes;this.setAttribute("class",r(i,this)),this.previousElementSibling&&this.previousElementSibling.setAttribute("class",r(i,this.previousElementSibling)),this.nextElementSibling&&this.nextElementSibling.setAttribute("class",r(i,this.nextElementSibling));for(let t of e)this.dataset.num==t.dataset.num&&(t.setAttribute("class",r(i,t)),t.previousElementSibling.setAttribute("class",r(i,t.previousElementSibling)),t.nextElementSibling.setAttribute("class",r(i,t.nextElementSibling)));for(let e of t)this.dataset.num==e.dataset.num&&(e.setAttribute("class",r(i,e)),e.previousElementSibling.setAttribute("class",r(i,e.previousElementSibling)),e.nextElementSibling.setAttribute("class",r(i,e.nextElementSibling)))}let a=n.querySelectorAll("td");for(let e of a)e.addEventListener("click",o);let c=0,d=0;n.addEventListener("click",(function e(n){if("TD"==n.target.tagName){c++;let n=[];for(let e=0;e<a.length;e++){let t=a[e].getAttribute("class");n.push(t)}if(80==n.filter(((e,t,n)=>n.indexOf(e)!==t)).length){alert("Победа. Возвращаемся в основное меню"),d++,1==d&&(this.innerHTML="",this.parentElement.classList.remove("hard_mode"),t.style.display="flex"),this.removeEventListener("click",e);for(let e of a)e.removeEventListener("click",o);l.textContent=""}}return l.textContent="Сделано ходов: "+c,console.log(d),d}))}(),i.classList.add("hard_mode")}))})();